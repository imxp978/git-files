<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    span {
      display: inline-block;
      width: 250px;
      height: 30px;
      vertical-align: middle;
      line-height: 30px;
      padding-left: 15px;
    }

    .error {
      color: red;
    }

    .right {
      color: green;
    }
  </style>
</head>

<body>
  <input type="text">
  <span></span>

  <textarea name="" id="" cols="30" rows="10"></textarea>
  <button>發布</button>
  <div></div>

  <script>
    // 元字符
    // 是一些具有特殊涵義的字符，可以極大提高靈活性和強大的匹配功能

    // 比如規定用戶輸入26個字母 普通字符的話abcd.....
    // 換成元字符寫法:[a-z]

    // 元字符分類
    // 1.邊界符(表示位置，開頭結尾，必須用什麼開頭，用什麼結尾)
    // 2.量詞(表示重複次數)
    // 3.字符類(比如 \d 表示 0~9 )

    // 1.邊界符-用來提示字符所處位置，主要有兩個
    // 1.1 ^ 表示匹配行首的文本(以誰開頭)
    // 1.2 $ 表示匹配行尾的文本(以誰結束)

    // 1.3邊界符練習
    console.log(/哈/.test('哈'))  //ture
    console.log(/^哈/.test('哈哈'))  //ture
    console.log(/^哈/.test('二哈'))  //false
    console.log(/^哈$/.test('哈'))  //ture
    console.log(/^哈$/.test('哈哈'))  //false 以哈開頭，同一個哈結尾 


    // 2.量詞-設定某個模式出現的次數
    // 2.1 *     重複0次或更多次
    // 2.2 +     重複1次或更多次
    // 2.3 ?     重複0次或1次
    // 2.4 {n}   重複n次
    // 2.5 {n,}  重複n次或更多次
    // 2.6 {n,m} 重複n次到m次
    console.log(/^哈$/.test('哈')) //ture 其餘為false

    // 量詞 *類似 >= 0 次
    console.log(/^哈*$/.test('')) //ture
    console.log(/^哈*$/.test('哈')) //ture
    console.log(/^哈*$/.test('哈哈')) //ture
    console.log(/^哈*$/.test('哈很哈')) //false
    // /^哈*$/只允許哈出現次數 不允許出現其他字符

    // 量詞 +類似 >= 1 次 不包含0
    console.log(/^哈+$/.test('')) //false

    // 量詞 ?類似  0 || 1 次

    // 量詞 {n}  必須出現n次
    console.log(/^哈{2}$/.test('哈')) //false
    console.log(/^哈{2}$/.test('哈哈')) //ture

    // 量詞 {n,}  必須出現 >= n次
    console.log(/^哈{3,}$/.test('哈')) //false
    console.log(/^哈{3,}$/.test('哈哈')) //false
    console.log(/^哈{3,}$/.test('哈哈哈')) //ture
    console.log(/^哈{3,}$/.test('哈哈哈哈')) //ture

    // 量詞 {n,m}  必須出現 >= n  && <= m 次 
    // 逗號左右兩側不能有空格
    console.log(/^哈{2,4}$/.test('哈')) //false
    console.log(/^哈{2,4}$/.test('哈哈')) //ture
    console.log(/^哈{2,4}$/.test('哈哈哈')) //ture
    console.log(/^哈{2,4}$/.test('哈哈哈哈')) //ture
    console.log(/^哈{2,4}$/.test('哈哈哈哈哈')) //false


    // 3.字符類
    // 3.1[]匹配字符集合
    // 後面字符串只要包含其中任意一個字符，都返回ture


    // 練習
    console.log(/^[abc]$/.test('a'))  //ture
    console.log(/^[abc]$/.test('b'))  //ture
    console.log(/^[abc]$/.test('c'))  //ture

    // 加入精確匹配 則只能一個字符匹配
    console.log(/^[abc]$/.test('ab'))  //false
    // 加入量詞
    console.log(/^[abc]{2}$/.test('ab'))  //true

    // 3.2[]裡面加上 - 連字符
    // 使用連字符表示一個範圍
    // [a-z] 只選一個
    console.log(/^[a-z]$/.test('a'))  //true
    // a-z 、 0-9 選擇
    console.log(/^[a-z0-9]$/.test('a'))  //true
    // a-z 、A-Z、 0-9 選擇
    console.log(/^[a-zA-Z0-9]$/.test('a'))  //true


    // 3.3[]裡面加上 ^ 取反符號
    // 匹配除了[]以外的字符
    // 要注意寫在中括號裡面

    // 3.4匹配除換行符以外任何單個字符


    // 案例-用戶名驗證
    // 要求:用戶銘要求用戶英文字母數字下滑線或者短橫線組成，並且長度為6-16為組成
    // /^[a-zA-z0-9-_]{6,16}$/
    const input = document.querySelector('input')
    const reg = /^[a-zA-z0-9-_]{6,16}$/

    input.addEventListener('blur', function () {
      if (reg.test(input.value)) {
        // className 會覆蓋 類名
        input.nextElementSibling.className = 'right'
        input.nextElementSibling.innerHTML = '輸入成功'
      } else {
        input.nextElementSibling.className = 'error'
        input.nextElementSibling.innerHTML = '請輸入6-16為英文數字(包括_,-)'
      }
    })

    // 3.4預定義:指的是某些常見模式的簡寫方式
    // 3.4.1 \d 匹配0-9任一數，相當於[0-9]

    // 3.4.2 \D 匹配所有0-9以外的字符，相當於[^0-9]

    // 3.4.3 \w 匹配任意字母、數字和下滑線，相當於[A-Za-z0-9_]

    // 3.4.4 \W 除所有字母、數字和下滑線以外的字符，相當於[^A-Za-z0-9_]

    // 3.4.5 \s 匹配空格(包括換行符、制表符、空格符等)，相當於[\t\r\n\v\f]

    // 3.4.6 \S 匹配非空格(包括換行符、制表符、空格符等)，相當於[^\t\r\n\v\f]

    // 日期格式: ^\d{4}-\d{1,2}-\d{1,2}$

    // 3.5修飾符:約束正則執行的某些細節節行為
    // 如是否區分大小寫、是否支持多行匹配
    // 語法:
    // /表達式/修飾符

    // 3.5.1 i是單詞ignore，正則匹配字母不區分大小寫 
    // 3.5.2 g是單詞global，匹配所有滿足正則表達式的結果

    console.log(/^java&/.test('java'))  //true
    console.log(/^java&/.test('JAVA'))  //false
    console.log(/^java&/i.test('JAVA'))  //不區分大小寫true

    // 3.5.3 替換replace
    // 語法:
    // 字符串.replace(/正則表達式/,'替換文本')

    const str = 'java是一門編成語言，學完JAVA工資很高'
    const re = str.replace(/java/ig, '前端')
    console.log(str)
    console.log(re)


    // 案例-過濾敏感詞
    // 1.用戶輸入
    // 2.內容進行正則替換查找
    // 3.全局替換
    const textarea = document.querySelector('textarea')
    const button = document.querySelector('button')
    const div = document.querySelector('div')
    button.addEventListener('click', function () {
      // console.log(textarea.value)
      div.innerHTML = textarea.value.replace(/激情|基情/g, '**')
      textarea.value = ''

    })


  </script>
</body>

</html>